(this["webpackJsonppoll-front"]=this["webpackJsonppoll-front"]||[]).push([[0],{38:function(e,t,n){e.exports=n(74)},43:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(32),o=n.n(r),c=n(5),i=(n(43),n(33)),u=n(36),s=n(7),d=n(15),m=n.n(d),p=function(){return m.a.get("/api/polls")},E=function(e){return m.a.post("/api/polls",e)},b=function(e,t){return m.a.put("".concat("/api/polls","/").concat(t),e)},f=function(e){return m.a.delete("".concat("/api/polls","/").concat(e))},h=n(9),v=n(10),g=n(12),O=n(11),y=n(16),w=n(37),j=n(19),C=n.n(j),S=(n(62),function(e){var t=e.handleSubmit,n=e.handleChange,a=e.handleArray,r=e.inputObject;return l.a.createElement("form",{onSubmit:t},l.a.createElement("div",{className:"Poll",id:"pollform"},l.a.createElement("input",{name:"question",id:"input-field",value:r.question,onChange:n,placeholder:"Enter your question"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),Array.from(r.options).map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("input",{name:"options",id:"input-field",value:e,placeholder:"Answer option ".concat(t+1),onChange:function(e){return a(e,t)}}))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",id:"form-button"},"Create Poll"),l.a.createElement("br",null),l.a.createElement("br",null)))}),k=function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).addQuestion=function(e){e.preventDefault();var t=a.state.options.filter((function(e){return""!==e})),n=t.map((function(e){return 0})),l=Boolean(t.length<2||Object(w.a)(new Set(t)).length<t.length),r={question:a.state.question,options:t,answerCount:n};switch(a.state.question){case"":alert("Please enter a question"),l&&alert("Please enter at least two unique answer options");break;default:l?alert("Please enter at least two unique answer options"):window.confirm("Save this poll?")&&E(r).then((function(e){a.props.onSubmit(e.data),a.setState({question:"",options:["",""]})}))}},a.handleQuestion=function(e){a.setState({question:e.target.value})},a.handleOptions=function(e,t){var n,l=function(n){return C()(n,Object(y.a)({},t,{$set:e.target.value}))};a.setState({options:l(a.state.options)}),t===a.state.options.length-1&&t<=28&&a.setState({options:l((n=a.state.options,C()(n,{$push:[""]})))})},a.state={question:"",options:["",""]},a}return Object(v.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"poll-maker"},l.a.createElement(S,{handleSubmit:this.addQuestion,handleChange:this.handleQuestion,handleArray:this.handleOptions,inputObject:this.state}))}}]),n}(a.Component),q=(n(63),function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"main"},l.a.createElement("div",{id:"pollmaker-background"},l.a.createElement("div",{id:"pollmaker"},l.a.createElement(k,{onSubmit:this.props.onSubmit}))))}}]),n}(a.Component)),N=(n(64),function(){return l.a.createElement("div",{className:"Header"},l.a.createElement("div",{id:"header"},l.a.createElement("div",{id:"header-buttons"},l.a.createElement(c.b,{to:"/polls"},l.a.createElement("button",{id:"header-button",type:"button",onClick:void 0},"Polls")),l.a.createElement(c.b,{to:"/"},l.a.createElement("button",{id:"header-button",type:"button",onClick:void 0},"Create A Poll")))))}),A=(n(70),function(e){var t=e.polls,n=e.onDelete;return t.length>0?l.a.createElement("div",{className:"poll-directory"},l.a.createElement("div",{id:"poll-dir-table"},l.a.createElement("h2",{id:"dir-header"},"Open polls:"),l.a.createElement("table",{class:"dir-table"},l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e.id+""},l.a.createElement("td",null,l.a.createElement(c.b,{to:"/polls/".concat(e.id)},e.question)),l.a.createElement("td",null,l.a.createElement("button",{class:"del-button",onClick:n,id:e.id},"delete")))})))))):l.a.createElement("div",{className:"poll-directory"},l.a.createElement("div",{id:"poll-dir-table"},l.a.createElement("h2",{id:"dir-header"},"Open polls:"),l.a.createElement("p",{id:"no-polls"},"No polls yet!")))}),P=(n(71),function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).updateValue=function(e){a.setState({selectedOption:e.target.value,selectedIndex:e.target.id})},a.saveAnswer=function(e){e.preventDefault(),a.props.onAnswer(a.props.poll,a.state.selectedIndex),a.setState({redirect:!0})},a.state={selectedOption:"",selectedIndex:0,redirect:!1},a}return Object(v.a)(n,[{key:"render",value:function(){var e=this,t=this.props.poll;return void 0===t?null:this.state.redirect?l.a.createElement(s.a,{to:"/polls/".concat(t.id,"/r")}):l.a.createElement("div",{className:"poll"},l.a.createElement("form",{id:"voteform",method:"POST",action:"/api/polls/".concat(t.id),onSubmit:this.saveAnswer},l.a.createElement("div",{id:"poll-table"},l.a.createElement("h2",{id:"poll-header"},t.question),l.a.createElement("table",{class:"poll-table"},l.a.createElement("tbody",null,t.options.map((function(t,n){return l.a.createElement("tr",{key:n},l.a.createElement("td",null,t),l.a.createElement("td",null,l.a.createElement("label",null,l.a.createElement("input",{type:"radio",class:"choice-button",value:t,id:n,checked:e.state.selectedOption===t,onChange:e.updateValue}))))}))))),l.a.createElement("br",null),l.a.createElement("div",{id:"poll-button-container"},l.a.createElement("button",{class:"answer-button",type:"submit"},l.a.createElement("strong",null,"Answer!")),l.a.createElement(c.b,{to:"/polls/".concat(t.id,"/r")},l.a.createElement("button",{class:"result-button"},"Results")))))}}]),n}(a.Component)),x=(n(72),function(e){var t=e.percentage;return l.a.createElement("div",{className:"filler",style:{width:"".concat(t,"%")}})}),D=function(e){var t=e.percentage;return l.a.createElement("div",{className:"result-bar"},l.a.createElement(x,{percentage:t}))},I=(n(73),function(e){var t=e.poll;if(void 0===t)return null;var n=function(e){return 0===e||void 0===e?0:e/t.answerCount.reduce((function(e,t){return e+t}),0)*100};return l.a.createElement("div",{className:"poll-results"},l.a.createElement("div",{id:"results-table"},l.a.createElement("h2",{id:"results-header"},t.question),l.a.createElement("table",{id:"results"},l.a.createElement("tbody",null,t.options.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",{id:"result"},l.a.createElement("p",{class:"split-para"},l.a.createElement("strong",null,e),l.a.createElement("span",null)),l.a.createElement(D,{percentage:n(t.answerCount[a])})),l.a.createElement("td",{id:"percentage"},"".concat(Math.round(n(t.answerCount[a])),"%")))}))))))}),Q=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){p().then((function(e){r(e.data)}))}),[]);var o=Object(s.g)("/polls/:id"),c=o?n.find((function(e){return e.id===o.params.id})):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(N,null),l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/polls/:id/r"},l.a.createElement(I,{poll:c})),l.a.createElement(s.b,{path:"/polls/:id"},l.a.createElement(P,{poll:c,onAnswer:function(e,t){var a=e.answerCount;a[Number(t)]+=1;var l=Object(i.a)({},e,{answerCount:a});b(l,e.id).then((function(t){r(n.map((function(t){return t!==e?t:l})))}))}})),l.a.createElement(s.b,{path:"/polls"},l.a.createElement(A,{polls:n,onDelete:function(e){var t=JSON.stringify([e.target.id]);t=t.substring(2,t.length-2),window.confirm("Are you sure you want to delete this poll?")&&f(t).then((function(e){r(n.filter((function(e){return e.id!==t})))}))}})),l.a.createElement(s.b,{path:"/"},l.a.createElement(q,{polls:n,onSubmit:function(e){r(n.concat(e))}})," "),l.a.createElement(s.b,{render:function(){return l.a.createElement(s.a,{to:"/"})}})))};o.a.render(l.a.createElement(c.a,null,l.a.createElement(Q,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.48f6d847.chunk.js.map